<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 *
 * @category    TrueAction
 * @package     TrueAction_Eb2c
 * @copyright   Copyright (c) 2013 True Action (http://www.trueaction.com)
 */
-->
<config>
	<modules>
		<TrueAction_Eb2c_Inventory>
			<version>1.0.0</version>
		</TrueAction_Eb2c_Inventory>
	</modules>
	<global>
		
		<models>
			<eb2cinventory>
				<class>TrueAction_Eb2c_Inventory_Model</class>
				<resourceModel>eb2cinventory_resource</resourceModel>
			</eb2cinventory>
			<eb2cinventory_resource>
                <class>TrueAction_Eb2c_Inventory_Model_Resource</class>
                <entities>
                    <details>
                        <table>eb2c_inventory_details</table>
                    </details>
              	</entities>
            </eb2cinventory_resource>
			<eb2cinventoryoverride>
				<class>TrueAction_Eb2c_Inventory_Override_Model</class>
			</eb2cinventoryoverride>
			<checkout>
				<rewrite>
					<cart>TrueAction_Eb2c_Inventory_Override_Model_Cart</cart>
				</rewrite>
			</checkout>
			<cataloginventory>
				<rewrite>
					<stock_item>TrueAction_Eb2c_Inventory_Override_Model_Stock_Item</stock_item>
				</rewrite>
			</cataloginventory>
		</models>
		<fieldsets>
			<sales_convert_quote_item>
				<eb2c_reservation_id>
					<to_order_item>*</to_order_item>
				</eb2c_reservation_id>
				<eb2c_reservation_expires>
					<to_order_item>*</to_order_item>
				</eb2c_reservation_expires>
				<eb2c_qty_reserved>
					<to_order_item>*</to_order_item>
				</eb2c_qty_reserved>
				<eb2c_creation_time>
					<to_order_item>*</to_order_item>
				</eb2c_creation_time>
				<eb2c_display>
					<to_order_item>*</to_order_item>
				</eb2c_display>
				<eb2c_delivery_window_from>
					<to_order_item>*</to_order_item>
				</eb2c_delivery_window_from>
				<eb2c_delivery_window_to>
					<to_order_item>*</to_order_item>
				</eb2c_delivery_window_to>
				<eb2c_shipping_window_from>
					<to_order_item>*</to_order_item>
				</eb2c_shipping_window_from>
				<eb2c_shipping_window_to>
					<to_order_item>*</to_order_item>
				</eb2c_shipping_window_to>
				<eb2c_ship_from_address_line_1>
					<to_order_item>*</to_order_item>
				</eb2c_ship_from_address_line_1>
				<eb2c_ship_from_address_city>
					<to_order_item>*</to_order_item>
				</eb2c_ship_from_address_city>
				<eb2c_ship_from_address_main_division>
					<to_order_item>*</to_order_item>
				</eb2c_ship_from_address_main_division>
				<eb2c_ship_from_address_country_code>
					<to_order_item>*</to_order_item>
				</eb2c_ship_from_address_country_code>
				<eb2c_ship_from_address_postal_code>
					<to_order_item>*</to_order_item>
				</eb2c_ship_from_address_postal_code>
			</sales_convert_quote_item>
        </fieldsets>
		<resources>
			<eb2cinventory_setup>
				<setup>
					<module>TrueAction_Eb2c_Inventory</module>
				</setup>
			</eb2cinventory_setup>
		</resources>
		<helpers>
			<eb2cinventory>
				<class>TrueAction_Eb2c_Inventory_Helper</class>
			</eb2cinventory>
		</helpers>
	</global>
	<frontend>
		<events>
			<sales_quote_item_qty_set_after>
				<observers>
					<trueaction_eb2c_inventory_observer>
						<type>singleton</type>
						<class>TrueAction_Eb2c_Inventory_Model_Observer</class>
						<method>checkEb2cInventoryQuantity</method>
					</trueaction_eb2c_inventory_observer>
				</observers>
			</sales_quote_item_qty_set_after>
			<checkout_controller_onepage_save_shipping_method>
				<observers>
					<trueaction_eb2c_inventory_observer>
						<type>singleton</type>
						<class>TrueAction_Eb2c_Inventory_Model_Observer</class>
						<method>processInventoryDetails</method>
					</trueaction_eb2c_inventory_observer>
				</observers>
			</checkout_controller_onepage_save_shipping_method>
		</events>
	</frontend>
	<default>
		<eb2c>
			<inventory>
				<developer_mode>1</developer_mode>
				<quantity_api_uri>http://eb2c.rgabriel.mage.tandev.net/eb2c/api/request/QuantityResponseMessage.xml</quantity_api_uri>
				<inventory_detail_uri>http://eb2c.rgabriel.mage.tandev.net/eb2c/api/request/InventoryDetailsResponseMessage.xml</inventory_detail_uri>
				<allocation_uri>http://eb2c.rgabriel.mage.tandev.net/eb2c/api/request/AllocationResponseMessage.xml</allocation_uri>
				<rollback_allocation_uri>http://eb2c.rgabriel.mage.tandev.net/eb2c/api/request/RollbackAllocationResponseMessage.xml</rollback_allocation_uri>
			</inventory>
		</eb2c>
	</default>
	<phpunit>
		<suite>
			<modules>
				<TrueAction_Eb2c_Inventory />
			</modules>
		</suite>
	</phpunit>
</config>
