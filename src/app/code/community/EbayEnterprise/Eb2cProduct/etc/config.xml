<?xml version="1.0" encoding="utf-8"?>
<!--
  Copyright (c) 2013-2014 eBay Enterprise, Inc.

  NOTICE OF LICENSE

  This source file is subject to the Open Software License (OSL 3.0)
  that is bundled with this package in the file LICENSE.md.
  It is also available through the world-wide-web at this URL:
  http://opensource.org/licenses/osl-3.0.php

  @copyright   Copyright (c) 2013-2014 eBay Enterprise, Inc. (http://www.ebayenterprise.com/)
  @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
-->
<config>
	<modules>
		<EbayEnterprise_Eb2cProduct>
			<version>1.3.0</version>
		</EbayEnterprise_Eb2cProduct>
	</modules>
	<global>
		<models>
			<eb2cproduct>
				<class>EbayEnterprise_Eb2cProduct_Model</class>
				<resourceModel>eb2cproduct_resource</resourceModel>
			</eb2cproduct>
			<eb2cproduct_resource>
				<class>EbayEnterprise_Eb2cProduct_Model_Resource</class>
			</eb2cproduct_resource>
		</models>
		<helpers>
			<eb2cproduct>
				<class>EbayEnterprise_Eb2cProduct_Helper</class>
			</eb2cproduct>
		</helpers>
		<resources>
			<eb2cproduct_attributes_setup>
				<setup>
					<module>EbayEnterprise_Eb2cProduct</module>
				</setup>
			</eb2cproduct_attributes_setup>
		</resources>
		<events>
			<catalog_product_edit_action>
				<observers>
					<lock_readonly_attributes>
						<class>eb2cproduct/observers</class>
						<method>lockReadOnlyAttributes</method>
						<!--
								Unfortunately, there is no actual support for an <args>node. This
								would be the perfect place to list the attributes we wish to
								treat as readonly. But as of Tue May 6 2014, this is not really
								supported.

								Please search for readonly_attributes which are defined at
								eb2cproduct/readonly_attributes.
							-->
					</lock_readonly_attributes>
				</observers>
			</catalog_product_edit_action>
			<product_feed_processing_complete>
				<observers>
					<eb2c_reindex_all>
						<class>eb2ccore/indexer</class>
						<method>reindexAll</method>
					</eb2c_reindex_all>
				</observers>
			</product_feed_processing_complete>
			<product_feed_complete_error_confirmation>
				<observers>
					<eb2c_error_confirmations>
						<class>eb2cproduct/error_confirmations</class>
						<method>process</method>
					</eb2c_error_confirmations>
				</observers>
			</product_feed_complete_error_confirmation>
			<product_feed_process_operation_type_error_confirmation>
				<observers>
					<eb2c_error_confirmations_operation>
						<class>eb2cproduct/error_confirmations</class>
						<method>processByOperationType</method>
					</eb2c_error_confirmations_operation>
				</observers>
			</product_feed_process_operation_type_error_confirmation>
			<filetransfer_import_complete>
				<observers>
					<eb2c_product_run_imports>
						<class>eb2cproduct/feed</class>
						<method>processFeeds</method>
						<type>model</type>
					</eb2c_product_run_imports>
				</observers>
			</filetransfer_import_complete>
		</events>
	</global>
	<default>
		<eb2ccore>
			<feed>
				<filetransfer_imports>
					<item_master>
						<local_directory>ExchangePlatform/Feed/inbox/product</local_directory>
						<event_type>ItemMaster</event_type>
						<header_version>2.3.0</header_version>
						<outbound>
							<message_header>
								<event_type>ItemMaster</event_type>
							</message_header>
						</outbound>
					</item_master>
					<content_master>
						<local_directory>ExchangePlatform/Feed/inbox/product</local_directory>
						<event_type>ContentMaster</event_type>
						<header_version>2.3.0</header_version>
						<outbound>
							<message_header>
								<event_type>ContentMaster</event_type>
							</message_header>
						</outbound>
					</content_master>
					<i_ship>
						<local_directory>ExchangePlatform/Feed/inbox/product</local_directory>
						<event_type>iShip</event_type>
						<header_version>2.3.0</header_version>
						<outbound>
							<message_header>
								<event_type>iShip</event_type>
							</message_header>
						</outbound>
					</i_ship>
					<item_pricing>
						<local_directory>ExchangePlatform/Feed/inbox/product</local_directory>
						<event_type>Pricing</event_type>
						<header_version>2.3.0</header_version>
						<outbound>
							<message_header>
								<event_type>Pricing</event_type>
							</message_header>
						</outbound>
					</item_pricing>
				</filetransfer_imports>
				<filetransfer_exports>
					<image_master>
						<xsd>CombinedProduct.xsd</xsd>
						<filename_format>{client_id}_{store_id}_{feed_type}_{time_stamp}_{current_store_id}.xml</filename_format>
						<event_type>ImageMaster</event_type>
						<outbound>
							<message_header>
								<event_type>ImageMaster</event_type>
							</message_header>
						</outbound>
					</image_master>
				</filetransfer_exports>
			</feed>
		</eb2ccore>
		<eb2cproduct>
			<attributes>
				<base_data>
					<is_global>0</is_global>
					<frontend_input>text</frontend_input>
					<default_value_text/>
					<default_value_yesno>0</default_value_yesno>
					<default_value_date/>
					<default_value_textarea/>
					<is_unique>0</is_unique>
					<is_required>0</is_required>
					<frontend_class/>
					<is_searchable>1</is_searchable>
					<is_visible_in_advanced_search>1</is_visible_in_advanced_search>
					<is_comparable>1</is_comparable>
					<is_used_for_promo_rules>0</is_used_for_promo_rules>
					<is_html_allowed_on_front>1</is_html_allowed_on_front>
					<is_visible_on_front>0</is_visible_on_front>
					<used_in_product_listing>0</used_in_product_listing>
					<used_for_sort_by>0</used_for_sort_by>
					<is_configurable>0</is_configurable>
					<is_filterable>0</is_filterable>
					<is_filterable_in_search>0</is_filterable_in_search>
					<backend_type>varchar</backend_type>
					<default_value/>
				</base_data>
				<default>
					<size>
						<scope>Website</scope>
						<label>Size</label>
						<group>General</group>
						<input_type>text</input_type>
						<unique>N</unique>
						<product_types><![CDATA[simple,configurable,bundle]]></product_types>
						<default/>
					</size>
					<style_id>
						<scope>Website</scope>
						<label>Style Id</label>
						<group>General</group>
						<input_type>text</input_type>
						<unique>N</unique>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<default/>
					</style_id>
					<is_clean>
						<scope>Website</scope>
						<label>Is Clean</label>
						<group>Retail Order Management</group>
						<input_type>boolean</input_type>
						<unique>N</unique>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<default>N</default>
						<backend_type>int</backend_type>
					</is_clean>
					<unresolved_product_links>
						<scope>Website</scope>
						<label>Unresolved Product Links</label>
						<group>Retail Order Management</group>
						<input_type>textarea</input_type>
						<unique>N</unique>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<default/>
						<backend_type>text</backend_type>
					</unresolved_product_links>
					<hts_codes>
						<scope>Website</scope>
						<label>HTS Codes</label>
						<group>Retail Order Management</group>
						<input_type>textarea</input_type>
						<unique>N</unique>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<default/>
						<backend_type>text</backend_type>
					</hts_codes>
					<tax_code>
						<scope>Website</scope>
						<label>Tax Code</label>
						<group>Prices</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
					</tax_code>
					<!-- { Attributes Required when We Are an EXPORT mode instance -->
					<item_type>
						<scope>Website</scope>
						<label>Item Type</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<default_value>Merch</default_value>
					</item_type>
					<drop_shipped>
						<scope>Website</scope>
						<label>Drop Shipped</label>
						<group>Retail Order Management</group>
						<input_type>boolean</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,bundle]]></product_types>
						<default_value>N</default_value>
						<backend_type>int</backend_type>
					</drop_shipped>
					<drop_ship_supplier_name>
						<scope>Website</scope>
						<label>Drop Ship Supplier Name</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,bundle]]></product_types>
					</drop_ship_supplier_name>
					<drop_ship_supplier_number>
						<scope>Website</scope>
						<label>Drop Ship Supplier Number</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,bundle]]></product_types>
					</drop_ship_supplier_number>
					<drop_ship_supplier_part_number>
						<scope>Website</scope>
						<label>Drop Ship Supplier Part Number</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,bundle]]></product_types>
					</drop_ship_supplier_part_number>
					<hierarchy_dept_number>
						<scope>Website</scope>
						<label>Hierarchy Department Number</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<frontend_class>validate-digits</frontend_class>
					</hierarchy_dept_number>
					<hierarchy_dept_description>
						<scope>Website</scope>
						<label>Hierarchy Department Description</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
					</hierarchy_dept_description>
					<hierarchy_subdept_number>
						<scope>Website</scope>
						<label>Hierarchy Subdepartment Number</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<frontend_class>validate-digits</frontend_class>
					</hierarchy_subdept_number>
					<hierarchy_subdept_description>
						<scope>Website</scope>
						<label>Hierarchy Subdepartment Description</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
					</hierarchy_subdept_description>
					<hierarchy_class_number>
						<scope>Website</scope>
						<label>Hierarchy Class Number</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<frontend_class>validate-digits</frontend_class>
					</hierarchy_class_number>
					<hierarchy_class_description>
						<scope>Website</scope>
						<label>Hierarchy Class Description</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
					</hierarchy_class_description>
					<hierarchy_subclass_number>
						<scope>Website</scope>
						<label>Hierarchy Subclass Number</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>1</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
						<frontend_class>validate-digits</frontend_class>
					</hierarchy_subclass_number>
					<hierarchy_subclass_description>
						<scope>Website</scope>
						<label>Hierarchy Subclass Description</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[simple,configurable,virtual,bundle,downloadable,giftcard]]></product_types>
					</hierarchy_subclass_description>
					<gift_card_tender_code>
						<scope>Website</scope>
						<label>Gift Card Tender Code</label>
						<group>Retail Order Management</group>
						<input_type>text</input_type>
						<unique>0</unique>
						<is_required>0</is_required>
						<product_types><![CDATA[giftcard]]></product_types>
						<is_searchable>0</is_searchable>
						<is_visible_in_advanced_search>0</is_visible_in_advanced_search>
						<is_comparable>0</is_comparable>
					</gift_card_tender_code>
					<!-- } End Attributes Required when We Are an EXPORT mode instance -->
				</default>
			</attributes>
			<!-- These attributes will display in the admin panel, but cannot be edited -->
			<readonly_attributes><![CDATA[hts_codes,is_clean,unresolved_product_links]]></readonly_attributes>
			<dummy>
				<!-- Default values for product attributes where Vanilla Magento doesn't already have defaults. -->
				<description>This product is invalid. If you are seeing this product, please do not attempt to purchase and contact customer service.</description>
				<in_stock>1</in_stock>
				<manage_stock>1</manage_stock>
				<short_description>invalid product. Please do not attempt to purchase.</short_description>
				<stock_quantity>0</stock_quantity>
				<type_id>simple</type_id>
				<weight>0</weight>
			</dummy>
			<api_service>product</api_service>
			<api_return_format>xml</api_return_format>
			<pim_export_feed>
				<cutoff_date/>
				<batch_size/>
			</pim_export_feed>
			<processor_delete_batch_size>200</processor_delete_batch_size>
			<processor_max_total_entries>200</processor_max_total_entries>
			<processor_update_batch_size>100</processor_update_batch_size>
			<attributes_code_list>color,size</attributes_code_list>
			<feed>
				<map>
					<ext_keys>brand_name,buyer_id,color,companion_flag,country_of_origin,gift_card_tender_code,hazardous_material_code,long_description,lot_tracking_indicator,ltl_freight_cost,may_ship_expedite,may_ship_international,may_ship_usps,msrp,price,safety_stock,sales_class,serial_number_type,ship_group,ship_window_max_hour,ship_window_min_hour,short_description,street_date,style_description,style_id,supplier_name,supplier_supplier_id</ext_keys>
					<ext_keys_bool>allow_gift_message,back_orderable,gift_wrap,gift_wrapping_available,is_hidden_product,service_indicator</ext_keys_bool>
				</map>
				<related_link_types>
					<es_accessory>related</es_accessory>
					<es_crossselling>crosssell</es_crossselling>
					<es_upselling>upsell</es_upselling>
				</related_link_types>
				<!--
				Mapping SalesClass possible values to a known value for Magento product stock item manage_stock attribute
				-->
				<stock_map>
					<stock>Yes</stock>
					<advanceOrderOpen>No</advanceOrderOpen>
					<advanceOrderLimited>Yes</advanceOrderLimited>
				</stock_map>
			</feed>
			<feed_attribute_mappings>
				<attribute_set_id>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractAttributeSetValue</method>
					<xpath>CustomAttributes/Attribute[@name="AttributeSet"]/Value</xpath>
				</attribute_set_id>
				<category_ids>
					<class>eb2cproduct/map_category</class>
					<type>helper</type>
					<method>extractCategoryIds</method>
					<xpath>CategoryLinks/CategoryLink[@import_mode!="Delete"]/Name</xpath>
				</category_ids>
				<country_of_manufacture>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractStringValue</method>
					<xpath>ExtendedAttributes/CountryOfOrigin|BaseAttributes/CountryOfOrigin</xpath>
				</country_of_manufacture>
				<is_clean>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>passThrough</method>
					<xpath>0</xpath>
				</is_clean>
				<type_id>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractProductTypeValue</method>
					<xpath>CustomAttributes/Attribute[@name="ProductType"]/Value</xpath>
				</type_id>
				<sku>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractSkuValue</method>
					<xpath>ItemId/ClientItemId|UniqueID|ClientItemId</xpath>
				</sku>
				<style_id>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractSkuValue</method>
					<xpath>ExtendedAttributes/Style/StyleID|StyleID</xpath>
				</style_id>
				<tax_code>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractStringValue</method>
					<xpath>BaseAttributes/TaxCode</xpath>
				</tax_code>
				<unresolved_product_links>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractProductLinks</method>
					<xpath>ProductLinks/ProductLink</xpath>
				</unresolved_product_links>
				<name>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractStringValue</method>
					<xpath>BaseAttributes/Title</xpath>
				</name>
				<description>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractStringValue</method>
					<xpath>ExtendedAttributes/LongDescription</xpath>
				</description>
				<short_description>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractStringValue</method>
					<xpath>ExtendedAttributes/ShortDescription</xpath>
				</short_description>
				<price>
					<class>eb2cproduct/map_price</class>
					<type>helper</type>
					<method>extractPrice</method>
					<xpath>Event</xpath>
				</price>
				<special_price>
					<class>eb2cproduct/map_price</class>
					<type>helper</type>
					<method>extractSpecialPrice</method>
					<xpath>Event</xpath>
				</special_price>
				<special_from_date>
					<class>eb2cproduct/map_price</class>
					<type>helper</type>
					<method>extractPriceEventFromDate</method>
					<xpath>Event</xpath>
				</special_from_date>
				<special_to_date>
					<class>eb2cproduct/map_price</class>
					<type>helper</type>
					<method>extractPriceEventToDate</method>
					<xpath>Event</xpath>
				</special_to_date>
				<msrp>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractFloatValue</method>
					<xpath>Event/MSRP</xpath>
				</msrp>
				<weight>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractFloatValue</method>
					<xpath>ExtendedAttributes/ItemDimension/Shipping/Mass/Weight</xpath>
				</weight>
				<status>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractStatusValue</method>
					<xpath>BaseAttributes/ItemStatus</xpath>
				</status>
				<visibility>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>extractVisibilityValue</method>
					<xpath>BaseAttributes/CatalogClass</xpath>
				</visibility>
				<tax_class_id>
					<class>eb2cproduct/map</class>
					<type>helper</type>
					<method>passThrough</method>
					<xpath>0</xpath>
				</tax_class_id>
				<price_view>
					<class>eb2cproduct/map</class>
					<type>disabled</type>
					<method/>
					<xpath/>
				</price_view>
				<allow_open_amount>
					<class>eb2cproduct/map</class>
					<type>disabled</type>
					<method/>
					<xpath/>
				</allow_open_amount>
				<stock_data>
					<class>eb2cproduct/map_stock</class>
					<type>helper</type>
					<method>extractStockData</method>
					<xpath>ExtendedAttributes/SalesClass</xpath>
				</stock_data>
			</feed_attribute_mappings>
			<feed_pim_mapping>
				<!-- http://confluence.tools.us.gspt.net/display/v11dev/Outbound+Inbound+File+Naming+Convention -->
				<item_map>
					<file_pattern>{client_id}_{catalog_id}_{feed_type}_{time_stamp}.xml</file_pattern>
					<root_node>ItemMaster</root_node>
					<item_node>Item</item_node>
					<event_type>ItemMaster</event_type>
					<schema_location>ItemMasterV11.xsd</schema_location>
					<is_validate>true</is_validate>
				</item_map>
				<content_map>
					<!-- Event Type is ContentMaster, but file name has Content. -->
					<file_pattern>{client_id}_{catalog_id}_Content_{time_stamp}.xml</file_pattern>
					<root_node>ContentMaster</root_node>
					<item_node>Content</item_node>
					<event_type>ContentMaster</event_type>
					<schema_location>ContentFeedV11.xsd</schema_location>
					<is_validate>true</is_validate>
				</content_map>
				<price_map>
					<!-- Event Type is Pricing, but file name has Price. Double-checked. -->
					<file_pattern>{client_id}_{store_id}_{catalog_id}_Price_{time_stamp}.xml</file_pattern>
					<root_node>Prices</root_node>
					<item_node>PricePerItem</item_node>
					<event_type>Pricing</event_type>
					<schema_location>PriceEventV11.xsd</schema_location>
					<is_validate>true</is_validate>
				</price_map>
			</feed_pim_mapping>
		</eb2cproduct>
	</default>
	<crontab>
		<jobs>
			<eb2cproduct_pim_export_feed>
				<run>
					<model>eb2cproduct/pim_collector::runExport</model>
				</run>
			</eb2cproduct_pim_export_feed>
			<eb2cproduct_image_export_feed>
				<run>
					<model>eb2cproduct/image_export::process</model>
				</run>
			</eb2cproduct_image_export_feed>
		</jobs>
	</crontab>
	<phpunit>
		<suite>
			<modules>
				<EbayEnterprise_Eb2cProduct/>
			</modules>
		</suite>
	</phpunit>
</config>
